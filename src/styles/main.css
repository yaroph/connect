.mainRoot{ min-height:100vh; }

.mainLayout{
  display:flex;
  gap: 22px;
  padding: 6px 22px 28px;
  max-width: 1450px;
  margin: 0 auto;
  align-items:flex-start;
}

.centerStage{
  flex: 1;
  display:flex;
  justify-content:center;
  padding-top: 10px;
}
.centerWrap{
  width: min(900px, 100%);
  border-radius: var(--radiusXL);
  padding: 18px;
  position: relative;
}

.qnHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 2px 8px 12px;
}
.qnHeaderEmpty{ height: 40px; }
.qnTitle{
  font-weight: 900;
  font-size: 18px;
  color: rgba(255,255,255,0.92);
}
.qnProgress{ margin-left: auto; }

/* Random questions progress bar */
.randomHeader {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 2px 8px 12px;
}

.randomProgressBar {
  flex: 1;
  height: 36px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 18px;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.randomProgressFill {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%);
  transition: none;
  border-radius: 18px;
}

.randomProgressText {
  position: relative;
  z-index: 1;
  font-weight: 700;
  font-size: 14px;
  color: rgba(255, 255, 255, 0.95);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.btnRefresh {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.btnRefresh:hover {
  background: rgba(255, 255, 255, 0.25);
  transform: rotate(90deg);
}

.btnRefresh:active {
  transform: rotate(90deg) scale(0.95);
}

.qnDoneOverlay{
  position:absolute;
  inset: 18px;
  border-radius: var(--radiusXL);
  background: radial-gradient(900px 280px at 50% 12%, rgba(34,197,94,0.32), rgba(0,0,0,0.42));
  display:flex;
  align-items:center;
  justify-content:center;
  animation: qnOverlayIn .22s ease-out;
  pointer-events:none;
  overflow:hidden;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
}

/* Overlay de validation en cours (bleu/jaune) */
.qnDoneOverlay.validatingOverlay{
  background: radial-gradient(900px 280px at 50% 12%, rgba(59,130,246,0.32), rgba(0,0,0,0.42));
}
.validatingOverlay .qnDoneText{
  color: rgba(255,255,255,0.95);
}
.validatingOverlay .qnDoneSub{
  color: rgba(245,158,11,0.95);
}

.qnDoneOverlay::after{
  content:"";
  position:absolute;
  inset:-40%;
  pointer-events:none;
  opacity: 0.35;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.28), transparent);
  transform: rotate(18deg) translateX(-25%);
  animation: qnShine 1.1s ease-in-out infinite;
}

.qnDoneConfetti{
  position:absolute;
  inset:0;
  pointer-events:none;
}
.qnDoneConfetti span{
  position:absolute;
  left: 50%;
  top: 55%;
  width: 12px;
  height: 12px;
  border-radius: 4px;
  transform: translate(-50%, -50%) scale(var(--scale, 1));
  opacity: 0;
  animation: qnConfettiFly var(--dur, 1200ms) ease-out var(--delay, 0ms) forwards;
  box-shadow: 0 14px 34px rgba(0,0,0,0.25);
}
.qnDoneConfetti span:nth-child(4n+1){ background: rgba(34,197,94,0.92); }
.qnDoneConfetti span:nth-child(4n+2){ background: rgba(59,130,246,0.92); }
.qnDoneConfetti span:nth-child(4n+3){ background: rgba(245,158,11,0.92); }
.qnDoneConfetti span:nth-child(4n){ background: rgba(255,255,255,0.85); }

.qnDoneInner{ text-align:center; position: relative; z-index: 2; }
.qnDoneEmoji{
  font-size: 46px;
  line-height: 1;
  margin-bottom: 10px;
  text-shadow: 0 18px 40px rgba(0,0,0,0.35);
  animation: qnEmojiPop 900ms cubic-bezier(.18, .95, .20, 1);
}
.qnDoneText{
  font-size: 26px;
  font-weight: 900;
  letter-spacing: .3px;
}
.qnDoneSub{
  margin-top: 6px;
  font-weight: 800;
  color: rgba(255,255,255,0.86);
  opacity: 0.92;
  animation: qnSubFloat 1.1s ease-in-out infinite;
}

@keyframes qnOverlayIn{
  0%{ transform: scale(0.97); opacity: 0; }
  100%{ transform: scale(1); opacity: 1; }
}
@keyframes qnEmojiPop{
  0%{ transform: scale(0.6) translateY(14px); opacity: 0; }
  60%{ transform: scale(1.08) translateY(-6px); opacity: 1; }
  100%{ transform: scale(1) translateY(0); opacity: 1; }
}
@keyframes qnSubFloat{
  0%,100%{ transform: translateY(0); }
  50%{ transform: translateY(-6px); }
}
@keyframes qnShine{
  0%{ transform: rotate(18deg) translateX(-35%); opacity: 0; }
  20%{ opacity: 0.35; }
  100%{ transform: rotate(18deg) translateX(35%); opacity: 0; }
}
@keyframes qnConfettiFly{
  0%{ transform: translate(-50%, -50%) rotate(0deg) scale(var(--scale, 1)); opacity: 0; }
  10%{ opacity: 1; }
  100%{ transform: translate(calc(-50% + var(--x, 0px)), calc(-50% + var(--y, -140px))) rotate(var(--rot, 180deg)) scale(var(--scale, 1)); opacity: 0; }
}

.limitNotice{
  margin-top: 14px;
  padding: 12px 14px;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.12);
  border: 1px solid rgba(255, 255, 255, 0.18);
  color: rgba(255, 255, 255, 0.9);
  text-align: center;
  font-weight: 600;
}

@media (max-width: 1100px){
  .mainLayout{ flex-direction:column; }
  .leftSidebar{ width: 100%; min-width: auto; height: auto; position: static; }
}

/* Profile modal */
.profileModal{ display:flex; flex-direction:column; gap: 14px; }
.profileSection{ border-radius: 18px; border: 1px solid rgba(255,255,255,0.12); background: rgba(0,0,0,0.12); padding: 14px; }
.profileSectionTitle{ font-weight: 900; margin-bottom: 12px; }
.profileGrid{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
@media (max-width: 820px){ .profileGrid{ grid-template-columns: 1fr; } }
.profileField{ display:flex; flex-direction:column; gap: 6px; }
.profileLabel{ font-size: 12px; color: rgba(255,255,255,0.72); }
.profileRow{ display:flex; gap: 10px; align-items:center; }
.profileFooter{ display:flex; gap: 10px; align-items:center; }

/* --- Loading states (server + random questions) --- */

.serverLoading{
  padding: 22px;
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(17,24,39,0.45) 0%, rgba(15,23,42,0.35) 55%, rgba(2,6,23,0.28) 100%);
}

.serverLoading::before{
  content:"";
  position:absolute;
  top:-45%;
  left:-55%;
  width: 70%;
  height: 180%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent);
  transform: rotate(18deg);
  animation: shimmer 2.1s ease-in-out infinite;
  pointer-events:none;
}

.serverLoading > *{
  position: relative;
  z-index: 1;
}

@keyframes shimmer{
  0% { transform: translateX(0) rotate(18deg); opacity: 0.35; }
  50% { opacity: 0.65; }
  100% { transform: translateX(220%) rotate(18deg); opacity: 0.35; }
}

.serverLoadingTop{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 16px;
  padding: 10px 6px 8px;
}

.serverLoadingTitle{
  font-size: 18px;
  font-weight: 900;
  letter-spacing: -0.2px;
}

.serverLoadingSpinner{
  width: 26px;
  height: 26px;
  border-radius: 999px;
  border: 3px solid rgba(255,255,255,0.22);
  border-top-color: rgba(255,255,255,0.92);
  animation: spin 900ms linear infinite;
}

.serverLoadingText{
  padding: 12px 6px 18px;
  color: rgba(255,255,255,0.86);
  display:flex;
  align-items:center;
  gap: 8px;
}

.loadingDots{
  display:inline-block;
  width: 22px;
  height: 10px;
  position: relative;
}

.loadingDots::before,
.loadingDots::after{
  content:"";
  position:absolute;
  top: 50%;
  width: 6px;
  height: 6px;
  border-radius: 99px;
  background: rgba(255,255,255,0.85);
  transform: translateY(-50%);
  animation: dots 1.1s ease-in-out infinite;
}

.loadingDots::before{ left: 0; }
.loadingDots::after{ right: 0; animation-delay: 180ms; }

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes dots {
  0%, 100% { opacity: 0.25; transform: translateY(-50%) scale(0.88); }
  50% { opacity: 0.95; transform: translateY(-50%) scale(1.08); }
}
.serverLoadingBar{
  margin: 0 6px 12px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.12);
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.10);
}

.serverLoadingBar > span{
  display:block;
  height: 100%;
  width: 42%;
  border-radius: 999px;
  background: rgba(255,255,255,0.9);
  filter: drop-shadow(0 6px 10px rgba(0,0,0,0.25));
  animation: loadbar 1.25s ease-in-out infinite;
}

.serverLoadingHint{
  padding: 0 6px 6px;
  font-size: 12px;
  color: rgba(255,255,255,0.68);
}

@keyframes loadbar {
  0% { transform: translateX(-120%); opacity: 0.8; }
  40% { opacity: 1; }
  100% { transform: translateX(260%); opacity: 0.85; }
}

/* Transition overlay (validate / skip) */
.skipOverlay{
  /* theme variables (VALIDATE = green by default) */
  --accent-rgb: 34 197 94;     /* emerald */
  --accent2-rgb: 110 231 183;  /* mint */
  --accent3-rgb: 59 130 246;   /* blue */
  --accent4-rgb: 245 158 11;   /* amber */
  --accent5-rgb: 255 255 255;  /* white */

  position: absolute;
  inset: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events: all; /* blocks interaction while the overlay is visible */
  z-index: 999;
  border-radius: var(--radiusXL);
  overflow: hidden;
  isolation: isolate;
  background:
    radial-gradient(720px 280px at 50% 14%, rgb(var(--accent-rgb) / 0.34), rgba(0,0,0,0.62));
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
}

/* Variant: question passed (red) */
.skipOverlay--skip{
  --accent-rgb: 239 68 68;     /* red */
  --accent2-rgb: 248 113 113;  /* rose */
  --accent3-rgb: 251 146 60;   /* orange */
  --accent4-rgb: 236 72 153;   /* pink */
  --accent5-rgb: 255 255 255;
}

/* Variant: validating (amber / orange) */
.skipOverlay--amber{
  --accent-rgb: 245 158 11;     /* amber */
  --accent2-rgb: 251 191 36;    /* amber-300 */
  --accent3-rgb: 249 115 22;    /* orange */
  --accent4-rgb: 252 211 77;    /* amber-200 */
  --accent5-rgb: 255 255 255;
}

/* soft glow */
.skipOverlay::before{
  content: "";
  position:absolute;
  inset: -40px;
  background: radial-gradient(540px 240px at 50% 28%, rgb(var(--accent-rgb) / 0.22), transparent 62%);
  filter: blur(2px);
  opacity: 0.95;
  animation: skipGlow 1200ms ease-out infinite alternate;
  z-index: 0;
  pointer-events:none;
}

@keyframes skipGlow{
  from{ transform: scale(0.98); opacity: 0.78; }
  to{ transform: scale(1.04); opacity: 1; }
}

.skipConfetti{
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index: 1;
}

.skipConfetti span{
  position:absolute;
  left: 50%;
  top: 42%;
  width: 10px;
  height: 10px;
  border-radius: 3px;
  transform: translate(-50%, -50%) scale(var(--scale, 1));
  opacity: 0;
  animation: skipConfettiFly var(--dur, 740ms) cubic-bezier(.12,.85,.12,1) var(--delay, 0ms) forwards;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

.skipConfetti span:nth-child(5n+1){ background: rgb(var(--accent-rgb) / 0.95); }
.skipConfetti span:nth-child(5n+2){ background: rgb(var(--accent2-rgb) / 0.92); }
.skipConfetti span:nth-child(5n+3){ background: rgb(var(--accent3-rgb) / 0.92); }
.skipConfetti span:nth-child(5n+4){ background: rgb(var(--accent4-rgb) / 0.92); }
.skipConfetti span:nth-child(5n){ background: rgb(var(--accent5-rgb) / 0.88); }

@keyframes skipConfettiFly{
  0%{ transform: translate(-50%, -50%) rotate(0deg) scale(var(--scale, 1)); opacity: 0; }
  10%{ opacity: 1; }
  100%{ transform: translate(calc(-50% + var(--x, 0px)), calc(-50% + var(--y, -80px))) rotate(var(--rot, 180deg)) scale(var(--scale, 1)); opacity: 0; }
}

.skipOverlayInner{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap: 10px;
  transform: scale(0.90);
  animation: skipPop 600ms cubic-bezier(.12, .98, .18, 1);
  z-index: 2;
  position: relative;
}

.skipBadge{
  width: 98px;
  height: 98px;
  border-radius: 999px;
  display:flex;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(60px 60px at 50% 35%, rgba(255,255,255,0.22), rgba(255,255,255,0.10)),
    linear-gradient(180deg, rgb(var(--accent-rgb) / 0.40), rgb(var(--accent-rgb) / 0.18));
  border: 1px solid rgba(255,255,255,0.22);
  box-shadow:
    0 22px 52px rgba(0,0,0,0.45),
    0 0 0 10px rgb(var(--accent-rgb) / 0.10);
  position: relative;
  overflow: hidden;
}

.skipBadge::after{
  content: "";
  position:absolute;
  inset: -40px;
  background: conic-gradient(from 180deg, rgba(255,255,255,0.0), rgba(255,255,255,0.28), rgba(255,255,255,0.0));
  animation: skipShine 900ms ease-out infinite;
}

@keyframes skipShine{
  from{ transform: rotate(0deg); opacity: 0.55; }
  to{ transform: rotate(360deg); opacity: 0.75; }
}

.skipOverlayIcon{
  width: 86px;
  height: 86px;
  opacity: 0.96;
  filter: drop-shadow(0 18px 34px rgba(0,0,0,0.40));
  color: rgba(255,255,255,0.98);
}

.skipOverlayText{
  font-weight: 900;
  letter-spacing: -0.2px;
  font-size: 17px;
  color: rgba(255,255,255,0.96);
  text-shadow: 0 14px 34px rgba(0,0,0,0.35);
}
.skipOverlaySub{
  margin-top: -2px;
  font-size: 12px;
  color: rgba(255,255,255,0.82);
  text-shadow: 0 14px 34px rgba(0,0,0,0.35);
}


@keyframes skipOverlayFade{
  0% { opacity: 0; }
  18% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes skipPop{
  0%{ transform: scale(0.78) translateY(10px); opacity: 0; }
  60%{ transform: scale(1.06) translateY(-4px); opacity: 1; }
  100%{ transform: scale(1) translateY(0); opacity: 1; }
}


.loadingCard{
  background: linear-gradient(135deg, rgba(17,24,39,1) 0%, rgba(15,23,42,1) 55%, rgba(2,6,23,1) 100%);
}

.loadingSpinnerBig{
  width: 56px;
  height: 56px;
  border-radius: 999px;
  border: 5px solid rgba(255,255,255,0.18);
  border-top-color: rgba(255,255,255,0.95);
  animation: spin 920ms linear infinite;
  margin-bottom: 10px;
}

/* Error cards (BSOD style) */
.errorCard {
  padding: 60px 40px;
  text-align: center;
  background: linear-gradient(135deg, #0078d7 0%, #005a9e 100%);
  border-radius: 20px;
  color: white;
  min-height: 400px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
}

.errorEmoji {
  font-size: 120px;
  font-weight: 300;
  line-height: 1;
  margin-bottom: 10px;
}

.errorTitle {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 10px;
  letter-spacing: -0.5px;
}

.errorMessage {
  font-size: 16px;
  line-height: 1.6;
  opacity: 0.95;
  max-width: 500px;
  margin: 0 auto;
}

.errorHint {
  margin-top: 20px;
  padding: 16px 24px;
  background: rgba(255, 255, 255, 0.15);
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  max-width: 450px;
}

/* Success card (daily/weekly limit reached) */
.successCard {
  background: linear-gradient(135deg, #16a34a 0%, #22c55e 55%, #f59e0b 100%);
  position: relative;
  overflow: hidden;
  animation: successPop 520ms cubic-bezier(0.2, 0.9, 0.2, 1);
}

.successCard > * {
  position: relative;
}

.successEmoji {
  text-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  animation: successWiggle 1.35s ease-in-out infinite;
}

.successCard::before {
  content: "";
  position: absolute;
  inset: -40%;
  opacity: 0.55;
  pointer-events: none;
  background:
    radial-gradient(circle at 12% 22%, rgba(255,255,255,0.35) 0 4px, transparent 5px),
    radial-gradient(circle at 78% 18%, rgba(255,255,255,0.25) 0 3px, transparent 4px),
    radial-gradient(circle at 24% 72%, rgba(255,255,255,0.30) 0 3px, transparent 4px),
    radial-gradient(circle at 70% 68%, rgba(255,255,255,0.22) 0 4px, transparent 5px),
    radial-gradient(circle at 45% 35%, rgba(255,255,255,0.20) 0 3px, transparent 4px),
    radial-gradient(circle at 55% 85%, rgba(255,255,255,0.18) 0 4px, transparent 5px);
  animation: confettiSpin 6.5s linear infinite;
}

@keyframes successPop {
  0% { transform: scale(0.96); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes successWiggle {
  0%, 100% { transform: rotate(-3deg) translateY(0); }
  50% { transform: rotate(3deg) translateY(-6px); }
}

@keyframes confettiSpin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@media (max-width: 768px) {
  .errorCard {
    padding: 40px 24px;
    min-height: 350px;
  }
  
  .errorEmoji {
    font-size: 80px;
  }
  
  .errorTitle {
    font-size: 22px;
  }
  
  .errorMessage {
    font-size: 14px;
  }
}
